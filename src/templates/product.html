{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="{% static 'css/thumbnail.css' %}"/>
    <script defer src="{% static 'js/thumbnail.js' %}" ></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/@alpinejs/persist@3.x.x/dist/cdn.min.js"
    ></script>
    <!-- Alpine Core -->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/@alpinejs/mask@3.x.x/dist/cdn.min.js"
    ></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
    <title>Продукт</title>
  </head>
  <body>
    <div id="modal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="modal-image">
        <div id="caption"></div>
    </div>

    <div class="page-wrap">
      <main class="main">
        <div class="container">
          <h1>{{ product.name }}</h1>
          <p>{{ product.description|safe }}</p>
          <p>Price: {{ product.price }}₴</p>
          <p>Фото: <img class="thumbnail" height="200" width="200" src="{{ product.photo.url }}" alt="{{ product.name }}" /></p>

          <section class="product-images">
            <h3>Images:</h3>
            {% for image in product.images.all %}
              <img class="thumbnail" height="50" width="50" src="{{ image.image.url }}" alt="Product Image" />
            {% endfor %}
          </section>

        <section class="product-options">
          <h3>Options:</h3>

          <!-- Згрупуємо опції за їх групами -->
          {% regroup product.options.all by group as grouped_options %}

          {% for group in grouped_options %}
            <div class="option-group">
              <h4>{{ group.grouper.name }}</h4>  <!-- Виводимо назву групи опцій -->

              <div class="options-list">
                {% for option in group.list %}
                  <div class="option-item">
                    <label>
                      <input type="radio" name="option_{{ group.grouper.id }}" value="{{ option.id }}">
                      {{ option.value|safe }} - {{ option.additional_price }}₴
                    </label>

                    {% if option.color %}
                      <p>Color:
                        <span style="background-color: {{ option.get_color }}; width: 20px; height: 20px; display: inline-block;"></span>
                      </p>
                    {% endif %}
                  </div>
                {% endfor %}
              </div>
            </div>
          {% endfor %}
        </section>
        </div>
      </main>
    </div>
  <script>
  {{product.options.all|safe}}
  </script>
  </body>
</html>

